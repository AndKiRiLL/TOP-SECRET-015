<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>

    <!--
    <form name="my">
        <input name="one" value="1">
        <input name="two" value="2">
    </form>

    <script>
        // получаем форму
        let form = document.forms.my; // <form name="my"> element

        // получаем элемент
        let elem = form.elements.one; // <input name="one"> element

        alert(elem.value);
    </script>
    -->

    <!--
    <form>
        <input type="radio" name="age" value="10">
        <input type="radio" name="age" value="20">
    </form>

    <script>
        let form = document.forms[0];

        let ageElems = form.elements.age;

        alert(ageElems[0]); // [object HTMLInputElement]
    </script>
    -->

    <!--
    <form id="form">
        <fieldset name="userFields">
            <legend>info</legend>
            <input name="login" type="text">
        </fieldset>
    </form>

    <script>
        let form = document.forms[0];
        alert(form.elements.login); // <input name="login">

        let fieldset = form.elements.userFields;
        alert(fieldset); // HTMLFieldSetElement

        // мы можем достать элемент по имени как из формы, так и из fieldset
        alert(fieldset.elements.login == form.elements.login); // true
    </script>
    -->

    <!--
    <form id="form">
        <input type="text" name="login">
    </form>

    <script>
        let form = document.forms[0];
        //form -> element
        let login = form.login

        // element -> form
        alert(login.form); // HTMLFormElement
    </script>
    -->

    <!--
    <select id="select">
        <option value="apple">Яблоко</option>
        <options value="pear">Груша</options>
        <option value="banana">Банан</option>
    </select>

    <script>
        // все три строки делают одно и то же
        select.options[2].selected = true;
        select.selectedIndex = 2;
        select.value = 'banana';
    </script>
    -->

    <!--
    <style>
        .invalid { border-color: red; }
        #error { color: red }
    </style>

    Ваш email: <input type="email" id="input">

    <div id="error"></div>

    <script>
        input.onblur = function() {
            if (!input.value.includes('@')) { // не email
                input.classList.add('invalid');
                error.innerHTML = 'Пожалуйста, введите правильный email.'
            }
        };

        input.onfocus = function() {
            if (this.classList.contains('invalid')) {
                // удаляем индикатор ошибки, т.к. пользователь хочет ввести данные заново
                this.classList.remove('invalid');
                error.innerHTML = "";
            }
        };
    </script>
    -->

    <!--
    <ul>
        <li tabindex="1">Один</li>
        <li tabindex="0">Ноль</li>
        <li tabindex="2">Два</li>
        <li tabindex="-1">Минус один</li>
    </ul>

    <style>
        li {cursor: pointer;}
        :focus { outline: 1px dashed green;}
    </style>
    -->


    <!--
    <form id="form">
        <input type="text" name="name" value="Имя">
        <input type="text" name="surname" value="Фамилия">
    </form>

    <style> .focused { outline: 1px solid red; } </style>

    <script>
        form.addEventListener("focusin", () => form.classList.add('focused'));
        form.addEventListener("focusout", () => form.classList.remove('focused'))
    </script>
    -->

    <!--
    <input type="text" onchange="alert(this.value)">
    <input type="button" value="Button">
    -->

    <!--
    <select onchange="alert(this.value)">
        <option value="">Выберите что-нибудь</option>
        <option value="1">Вариант 1</option>
        <option value="2">Вариант 2</option>
        <option value="3">Вариант 3</option>
    </select>
    -->

    <!--
    <input type="text" id="input"> oninput: <span id="result"></span>
    <script>
        input.oninput = function() {
            result.innerHTML = input.value;
        };
    </script>
    -->

    <!--
    <input type="text" id="input">
    <script>
        input.oncut = input.oncopy = input.onpaste = function(event) {
            alert(event.type + ' - ' + event.clipboardData.getData('text/plain'));
            return false;
        }
    </script>
    -->

    <!--
    <form onsubmit="alert('submit!'); return false">
        Первый пример: нажмите Enter: <input type="text" value="Текст"><br>
        Второй пример: нажмите на кнопку "Отправить": <input type="submit" value="Отправить">
    </form>
    -->


    <!--  HOMEWORK  -->

    <!-- 1 -->
    <!--
    <select id="genres">
        <option value="rock">Рок</option>
        <option value="blues" selected>Блюз</option>
    </select>

    <script>
        
        let selectedOption = genres.options[genres.selectedIndex];
        alert( selectedOption.value );
        alert( selectedOption.text );

        let newOption = new Option("Класика", "classic");
        genres.append(newOption);

        newOption.selected = true;

    </script>
    -->

    <!-- 2 -->
    <div id="textarea" class="textarea">123123123</div>

    <script>
        let area = null;
        let textarea = document.getElementById('textarea');

        textarea.onclick = function() {
            editStart();
        };

        function editStart() {
            area = document.createElement('textarea');
            area.className = 'edit';
            area.value = textarea.innerHTML;

            area.onkeydown = function(event) {
                if (event.key == 'Enter') {
                    this.blur();
                }
            };

        area.onblur = function() {
            editEnd();
        };

        textarea.replaceWith(area);
        area.focus();
    }

    function editEnd() {
        textarea.innerHTML = area.value;
        area.replaceWith(textarea);
    }
    </script>


    <table id="bagua-table">
        <tr>
            <th colspan="3">Квадрат <em>Bagua</em>: Направление, Элемент, Цвет,
            Значение</th>
        </tr>
        <tr>
            <td class="nw"><strong>Северо-Запад</strong>
                <br>Металл
                <br>Серебро
                <br>Старейшины
            </td>
            <td class="n"><strong>Север</strong>
                <br>Вода
                <br>Синий
                <br>Перемены
            </td>
            <td class="ne"><strong>Северо-Восток</strong>
                <br>Земля
                <br>Жёлтый
                <br>Направление
            </td>
        </tr>
        <tr>
            <td class="w"><strong>Запад</strong>
                <br>Металл
                <br>Золото
                <br>Молодость
            </td>
            <td class="c"><strong>Центр</strong>
                <br>Всё
                <br>Пурпурный
                <br>Гармония
            </td>
            <td class="e"><strong>Восток</strong>
                <br>Дерево
                <br>Синий
                <br>Будущее
            </td>
        </tr>
        <tr>
            <td class="sw"><strong>Юго-Запад</strong>
                <br>Земля
                <br>Коричневый
                <br>Спокойствие
            </td>
            <td class="s"><strong>Юг</strong>
                <br>Огонь
                <br>Оранжевый
                <br>Слава
            </td>
            <td class="se"><strong>Юго-Восток</strong>
                <br>Дерево
                <br>Зелёный
                <br>Роман
            </td>
        </tr>
    </table>

    Депозитный калькулятор.
    <form name="calculator">
        <table>
            <tr>
                <td>Первоначальный депозит</td>
                <td>
                    <input name="money" type="number" value="10000", required>
                </td>
            </tr>
            <tr>
                <td>Срок вклада?</td>
                <td>
                    <select name="months">
                        <option value="3">3 (минимум)</option>
                        <option value="6">6 (полгода)</option>
                        <option value="12" selected>12 (год)</option>
                        <option value="18">18 (1.5 года)</option>
                        <option value="24">24 (2 года)</option>
                        <option value="30">30 (2.5 года)</option>
                        <option value="36">36 (3 года)</option>
                        <option value="60">60 (5 лет)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Годовая процентная ставка?</td>
                <td>
                    <input name="interest" type="number" value="5" required>
                </td>
            </tr>
        </table>
    </form>

    <table id="diagram">
        <tr>
            <th>Было:</th>
            <th>Станет:</th>
        </tr>
        <tr>
            <th id="money-before"></th>
            <th id="money-after"></th>
        </tr>
        <td>
            <div style="background: red; width: 40px; height: 100px"></div>
        </td>
        <td>
            <div style="background: green; width: 40px; height: 0;" id="height-after"></div>
        </td>

    </table>

    <script>

        let form = document.forms.calculator;
    
        form.money.oninput = calculate;
        form.months.onchange = calculate;
        form.interest.oninput = calculate;
    
        function calculate() {
          let initial = +form.money.value;
          if (!initial) return;
    
          let interest = form.interest.value * 0.01;
    
          if (!interest) return;
    
          let years = form.months.value / 12;
          if (!years) return;
    
          let result = Math.round(initial * (1 + interest) ** years);
    
          let height = result / form.money.value * 100 + 'px';
          document.getElementById('height-after').style.height = height;
          document.getElementById('money-before').innerHTML = form.money.value;
          document.getElementById('money-after').innerHTML = result;
        }
    
        calculate();
      </script>

    <script src="./js/homework.js"></script>
</body>
</html>